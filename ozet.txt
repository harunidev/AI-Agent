# PROJE ÖZETİ: Universal AST Test Generator (AI4SE)

Bu proje, Python kodları için **yapay zeka kullanmadan (veya sadece destekleyici olarak kullanarak)**, tamamen kod analizi (AST - Abstract Syntax Tree) yöntemleriyle %90+ coverage oranına sahip Pytest testleri üreten otomatik bir sistemdir.

## 1. Temel Amaç
Herhangi bir Python kodu verildiğinde, bu kodun ne yaptığını "anlayarak" (parametreleri, döngüleri, koşulları, sınıf yapılarını analiz ederek) mantıklı ve kapsamlı test senaryolarını saniyeler içinde oluşturmak.

---

## 2. Teknoloji Yığını (Tech Stack)
- **Backend:** Python (FastAPI)
- **Frontend:** React (Vite)
- **Analiz Motoru:** Python `ast` modülü (Standart kütüphane)
- **Test Çalıştırıcı:** `pytest` ve `coverage.py`
- **Tasarım:** Modern, neon/dark tema (CSS Variables)

---

## 3. Çalışma Mantığı (Workflow)

Sistem şu 4 ana adımdan oluşur:

### Adım 1: Derinlemesine Kod Analizi (AST)
Kullanıcının gönderdiği kod, `server/services/generator.py` içindeki `analyze_code_structure` fonksiyonu ile satır satır değil, yapısal olarak incelenir.
- **Fonksiyonlar & Metodlar:** İsimleri, parametreleri, dönüş tipleri.
- **Parametre Tipleri:** Parametre isminden tip tahmini (Örn: `path` -> string/dosya, `is_valid` -> boolean, `count` -> integer).
- **Branch Analizi:** `if/elif/else` blokları ve koşulları.
- **Class Yapıları:** Sınıfları tanır, `__init__` metodunu bulur, önce nesne oluşturup sonra metodları çağırır.

### Adım 2: Akıllı Test Üretimi (Universal Generator)
Analiz edilen yapıya göre test kodları dinamik olarak yazılır (`generate_tests_with_ai` - AI kapalı modda):
- **Smart Parameter Detection:** Parametre ismine bakarak mantıklı değerler üretir.
    - `file`, `path`, `directory` -> Geçici (temp) dosya/klasör oluşturma kodu ekler.
    - `pattern`, `search` -> `'.py'`, `'.txt'` gibi stringler üretir.
    - `limit`, `depth` -> `-1`, `0`, `1`, `10` gibi sınır değerleri dener.
- **Edge Cases:** Boş string, `None`, negatif sayılar gibi kırıcı testler ekler.
- **Directory vs File Separation:** `search_files` gibi klasör isteyen fonksiyonlarla `count_lines` gibi dosya isteyen fonksiyonları ayırt eder ve ona göre ortam hazırlar.

### Adım 3: Coverage Ölçümü ve İyileştirme Döngüsü
Üretilen testler çalıştırılır ve coverage raporu alınır.
- Eğer coverage < %90 ise sistem **İteratif İyileştirme Moduna** girer.
- Çalışmayan satırları (missing lines) tespit eder.
- Eksik kısımlar için yeni, hedeflenmiş testler üretir.
- Bu döngü maksimum 3 kez tekrarlanır.

### Adım 4: Sonuç Gösterimi
Backend, üretilen nihai test kodunu ve coverage sonucunu Frontend'e gönderir. Kullanıcı arayüzünde:
- Renkli syntax highlighting ile test kodu.
- Coverage yüzdesi (Gauge chart).
- Başarılı/Başarısız test sayısı kartları gösterilir.

---

## 4. Öne Çıkan Özellikler

*   **Evrensel Uyumluluk:** Sadece belli bir proje için değil, rastgele yüklenen herhangi bir Python fonksiyonu veya sınıfı için çalışır.
*   **AI Bağımsızlığı:** Gemini/OpenAI API'leri kapalı olsa bile %90+ başarı sağlar.
*   **Güvenli Test Ortamı:** Dosya işlemleri için `tempfile` kullanır, ana sisteme zarar vermez.
*   **Hata Toleransı:** Testlerde `try/except` blokları kullanarak, bir testin patlamasının diğerlerini durdurmasını engeller.

## 5. Mevcut Durum
Proje, karmaşık dosya işlemleri (`os.walk`, `os.listdir`) ve sınıf yapıları dahil olmak üzere çoğu senaryoda %100'e yakın coverage sağlamaktadır. Son yapılan "Directory vs File Utility" ayrımı ile dosya sistemi fonksiyonlarındaki başarı oranı %10'dan %90+'a çıkarılmıştır.
